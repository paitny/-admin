import{h as M}from"./moment.17f8281e.js";import{resolveComponent as i,openBlock as c,createElementBlock as h,createVNode as r,withCtx as a,Fragment as g,renderList as L,createBlock as w,createElementVNode as o,normalizeStyle as W,pushScopeId as j,popScopeId as E,createTextVNode as f}from"https://esm.sh/vue@3.0.5";import{_ as b}from"./index.10c0c1b8.js";import"https://cdn.jsdelivr.net/npm/ant-design-vue@2.2.0-beta.6/lib/grid/style/index.css";import"https://esm.sh/axios@0.21.1";import"https://esm.sh/vuex@4.0.2";import"https://esm.sh/dayjs@1.10.5";import"https://esm.sh/dayjs@1.10.5/plugin/localeData.js";import"https://esm.sh/dayjs@1.10.5/plugin/customParseFormat.js";import"https://esm.sh/dayjs@1.10.5/plugin/advancedFormat.js";import"https://esm.sh/dayjs@1.10.5/plugin/weekOfYear.js";import"https://esm.sh/dayjs@1.10.5/plugin/weekYear.js";import"https://esm.sh/dayjs@1.10.5/plugin/dayOfYear.js";import"https://esm.sh/dayjs@1.10.5/plugin/isSameOrAfter.js";import"https://esm.sh/dayjs@1.10.5/plugin/isSameOrBefore.js";const H={name:"swiper",data(){return{urlList:[{id:0},{id:1},{id:2},{id:3},{id:4}],bannerHeight:0,screenWidth:0}},methods:{async getSwiper(){let{data:e}=await this.$axios({method:"GET",url:"/get/swiper"});if(e.code)return this.$message.error(e.msg);this.urlList=e.data}},mounted(){this.getSwiper(),this.screenWidth=window.innerWidth,this.bannerHeight=350/2200*this.screenWidth,window.onresize=()=>{this.screenWidth=window.innerWidth,this.bannerHeight=350/2200*this.screenWidth}}};function I(e,t,s,v,n,d){const u=i("el-carousel-item"),l=i("el-carousel");return c(),h("div",null,[r(l,{height:n.bannerHeight+"px",type:"card"},{default:a(()=>[(c(!0),h(g,null,L(n.urlList,_=>(c(),w(u,{key:_.id},{default:a(()=>[o("div",{class:"img",style:W({backgroundImage:`url(${e.baseURL}${_.swiper})`}),alt:"\u6B63\u5728\u52A0\u8F7D\u4E2D"},null,4)]),_:2},1024))),128))]),_:1},8,["height"])])}var U=b(H,[["render",I],["__scopeId","data-v-06b97da1"]]);const z={name:"SwiperManger",data(){return{MangerSwiper:[]}},components:{Swiper:U},methods:{dateFormat:function(e,t){let s=e[t.property];return s==null?"":M(s).format("YYYY-MM-DD HH:mm:ss")},async getMangerSwiper(){let{data:e}=await this.$axios({method:"GET",url:"/get/swiper"});this.MangerSwiper=e.data},async swiperUpdate(e,t){let{data:s}=await this.$axios({method:"POST",url:"/adminServer/swiper/update",data:{id:e,doc:t}});if(s.code)return this.$message.error(s.msg);this.$message.success("\u66F4\u65B0\u6210\u529F"),await this.getMangerSwiper()},swiper_before_upload(e,t){/^(\s|\S)+(jpg|png|JPG|PNG)+$/.test(e.name)||(this.$message.error("\u53EA\u80FD\u4E0A\u4F20.png \u6216. jpj\u6587\u4EF6"),t.pop())},swiper_upload_success(e,t){if(e.code)return this.$message.error(e.msg);this.swiperUpdate(t,{swiper:e.url})},async deleteSwiper(e){let{data:t}=await this.$axios({method:"POST",url:"/adminServer/swiper/delete",data:{id:e}});if(t.code)return this.$message.error(t.msg);this.$message.success("\u5220\u9664\u6210\u529F"),await this.getMangerSwiper()}},created(){this.getMangerSwiper()}},T=e=>(j("data-v-25de1d7d"),e=e(),E(),e),C={class:"swiperExhibition"},F={class:"swiper"},G={class:"el-icon-upload"},N=T(()=>o("div",{class:"el-upload__text"},[f("\u5C06.jpj\u6216\u8005png\u6587\u4EF6\u62D6\u5230\u6B64\u5904\uFF0C\u6216"),o("em",null,"\u70B9\u51FB\u4E0A\u4F20")],-1)),P=f("\u5220\u9664 ");function R(e,t,s,v,n,d){const u=i("Swiper"),l=i("el-table-column"),_=i("el-image"),S=i("upload-filled"),x=i("el-icon"),$=i("el-upload"),y=i("el-button"),k=i("el-table");return c(),h(g,null,[o("div",C,[r(u)]),r(k,{data:n.MangerSwiper,border:"",style:{width:"100%",height:"100%"}},{default:a(()=>[(c(),w(l,{prop:"date",label:"\u53D1\u5E03\u65E5\u671F",key:n.MangerSwiper.date,formatter:d.dateFormat,align:"center"},null,8,["formatter"])),r(l,{label:"\u91CD\u65B0\u4E0A\u4F20\u8F6E\u64AD\u56FE",width:"1000",align:"center"},{default:a(p=>[o("div",F,[r(_,{style:{width:"450px",height:"250px"},src:`${e.baseURL}${p.row.swiper}`,"preview-src-list":[`${e.baseURL}${p.row.swiper}`],"preview-teleported":"true"},null,8,["src","preview-src-list"]),r($,{class:"upload-demo",drag:"",action:`${e.baseURL}/adminServer/swiper/swiperAdd`,"on-change":d.swiper_before_upload,limit:1,ref:"swiperForm","on-success":function(m){d.swiper_upload_success(m,p.row._id)},"with-credentials":!0},{default:a(()=>[o("i",G,[r(x,{class:"el-icon--upload"},{default:a(()=>[r(S)]),_:1})]),N]),_:2},1032,["action","on-change","on-success"])])]),_:1}),r(l,{fixed:"right",label:"\u64CD\u4F5C",align:"center"},{default:a(p=>[r(y,{style:{width:"200px",height:"100px",margin:"0 auto"},type:"danger",onClick:m=>d.deleteSwiper(p.row._id),size:"large"},{default:a(()=>[P]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])],64)}var ie=b(z,[["render",R],["__scopeId","data-v-25de1d7d"]]);export{ie as default};
//# sourceMappingURL=SwiperManager.d4bdb041.js.map
