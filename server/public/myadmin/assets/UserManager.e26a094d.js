import{h as g}from"./moment.17f8281e.js";import{_ as f,r as s,o as m,c as w,b as t,w as n,j as b,a as v,g as x}from"./index.5ddfe03b.js";const $={name:"ContactMsg",data(){return{userData:[]}},methods:{dateFormat:function(e,a){let l=e[a.property];return l==null?"":g(l).format("YYYY-MM-DD HH:mm:ss")},async getUserData(){let{data:e}=await this.$axios({method:"GET",url:"/get/user"});if(console.log(e.data),e.code)return this.$message.error(e.msg);this.userData=e.data},async deleteUser(e){let{data:a}=await this.$axios({method:"DELETE",url:"/adminServer/consumer/delete",data:{id:e}});if(a.code)return this.$message.error(a.msg);this.$message.success("\u7528\u6237\u5DF2\u6CE8\u9500"),await this.getContactData()},async switchHandle(e){let{data:a}=await this.$axios({method:"POST",url:"/adminServer/consumer/admin",data:{id:e._id,admin:e.admin}});if(console.log(e.admin),a.code)return this.$message.error(a.msg);await this.getUserData()}},created(){this.getUserData()}},D={id:"ContactMsg"},y={class:"demo-image__preview"},U=x("\u6CE8\u9500\u7528\u6237 ");function C(e,a,l,k,c,i){const o=s("el-table-column"),u=s("el-image"),_=s("el-switch"),h=s("el-button"),p=s("el-table");return m(),w("div",D,[t(p,{data:c.userData,border:"",style:{width:"100%"}},{default:n(()=>[(m(),b(o,{prop:"date",label:"\u6CE8\u518C\u65E5\u671F",key:c.userData.date,formatter:i.dateFormat,width:"200px",align:"center"},null,8,["formatter"])),t(o,{prop:"_id",label:"id",align:"center"}),t(o,{prop:"user",label:"Name",align:"center"}),t(o,{prop:"secret",label:"secret",align:"center"}),t(o,{prop:"photo",label:"\u5934\u50CF",align:"center"},{default:n(r=>[v("div",y,[t(u,{style:{width:"150px",height:"100px"},src:`${e.baseURL}${r.row.photo}`,"preview-src-list":[`${e.baseURL}${r.row.photo}`],"initial-index":4,fit:"cover","preview-teleported":"true"},null,8,["src","preview-src-list"])])]),_:1}),t(o,{label:"\u7BA1\u7406\u5458\u8D26\u53F7\u6388\u6743",align:"center"},{default:n(r=>[t(_,{style:{display:"block"},modelValue:r.row.admin,"onUpdate:modelValue":d=>r.row.admin=d,"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"\u7BA1\u7406\u5458","inactive-text":"\u4E0D\u662F\u7BA1\u7406\u5458",onChange:d=>i.switchHandle(r.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),t(o,{fixed:"right",label:"\u8C28\u614E\u64CD\u4F5C",align:"center"},{default:n(r=>[t(h,{type:"danger",onClick:d=>i.deleteUser(r.row._id),size:"large"},{default:n(()=>[U]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])])}var M=f($,[["render",C]]);export{M as default};
