{"version":3,"file":"SwiperAdd.91ddb438.js","sources":["../../src/views/SwiperManage/SwiperAdd.vue"],"sourcesContent":["<template>\r\n  <div class=\"swiperAdd\">\r\n    <div class=\"swiperPhoto\">\r\n      <el-form\r\n          :model=\"form\"\r\n      >\r\n        <el-form-item label=\"轮播图上传：\" label-width=\"150px\" >\r\n          <el-upload\r\n              class=\"upload-demo\"\r\n              drag\r\n              :action=\"`${baseURL}/adminServer/swiper/swiperAdd`\"\r\n              :auto-upload=\"false\"\r\n              :on-change=\"fileChange\"\r\n              :limit=\"1\"\r\n              ref=\"swiperForm\"\r\n              :on-success=\"swiper_upload_success\"\r\n              :with-credentials=\"true\"\r\n          >\r\n            <i class=\"el-icon-upload\"> <el-icon class=\"el-icon--upload\"><upload-filled /></el-icon></i>\r\n            <div class=\"el-upload__text\">将.jpj或者png文件拖到此处，或<em>点击上传</em></div>\r\n          </el-upload>\r\n        </el-form-item>\r\n        <el-form-item>\r\n            <el-button type=\"primary\" @click=\"submitSwiper\" size=\"large\" style=\"margin: 50px 16%\">确认上传</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </div>\r\n\r\n  </div>\r\n\r\n\r\n\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"SwiperAdd\",\r\n  data(){\r\n    return{\r\n      form:{\r\n        swiper:\"\"\r\n      }\r\n    }\r\n  },\r\n  methods:{\r\n\r\n    //轮播图发表\r\n    async submit(){\r\n      let {data} = await this.$axios({\r\n        method: \"POST\",\r\n        url: \"/adminServer/swiper/add\",\r\n        data: this.form\r\n      })\r\n      if(data.code){\r\n        return this.$message.error(data.msg)\r\n      }\r\n      await this.$router.push('/swiperManager')\r\n    },\r\n\r\n//上传之前验证\r\n    fileChange(file,fileList){\r\n      if(file.status!=='ready')return\r\n      if( /^(\\s|\\S)+(jpg|png|JPG|PNG)+$/.test(file.name)){\r\n      }else {\r\n        this.$message.error(\"只能上传.png 或. jpj文件\")\r\n        fileList.pop()\r\n      }\r\n\r\n    },\r\n    submitSwiper(){\r\n      this.$refs.swiperForm.submit()\r\n    }\r\n    ,\r\n    //上传成功\r\n    swiper_upload_success(res){\r\n      if (res.code) {\r\n        return this.$message.error(\"上传轮播图失败，请检查后端报错\")\r\n      }\r\n      this.form.swiper = res.url\r\n      this.submit()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n\r\n.swiperAdd{\r\n  .swiperPhoto{\r\n    margin-left: 50px;\r\n  }\r\n  :deep(.el-upload-dragger){\r\n    width: 360px;\r\n\r\n  }\r\n}\r\n\r\n\r\n</style>\r\n"],"names":["_createElementVNode","_openBlock","_createElementBlock","_createVNode"],"mappings":"k5BAmCA,KAAK,GAAU,CACb,KAAM,YACN,MAAM,CACJ,MAAM,CACJ,KAAK,CACH,OAAO,EACT,CACF,CACD,EACD,QAAQ,CAGN,KAAM,SAAQ,CACZ,GAAI,CAAC,QAAQ,KAAM,MAAK,OAAO,CAC7B,OAAQ,OACR,IAAK,0BACL,KAAM,KAAK,KACZ,EACD,GAAG,EAAK,KACN,MAAO,MAAK,SAAS,MAAM,EAAK,GAAG,EAErC,KAAM,MAAK,QAAQ,KAAK,gBAAgB,CACzC,EAGD,WAAW,EAAK,EAAS,CACvB,AAAG,EAAK,SAAS,SACb,gCAA+B,KAAK,EAAK,IAAI,GAE/C,MAAK,SAAS,MAAM,sDAAmB,EACvC,EAAS,IAAI,GAGhB,EACD,cAAc,CACZ,KAAK,MAAM,WAAW,OAAO,CAC/B,EAGA,sBAAsB,EAAI,CACxB,GAAI,EAAI,KACN,MAAO,MAAK,SAAS,MAAM,4FAAiB,EAE9C,KAAK,KAAK,OAAS,EAAI,IACvB,KAAK,OAAO,CACd,CACF,CACF,0CAjFO,EAAA,CAAA,MAAM,WAAW,EACf,EAAA,CAAA,MAAM,aAAa,EAgBb,EAAA,CAAA,MAAM,gBAAgB,UACzBA,EAAkE,MAAA,CAA7D,MAAM,mBAAiB,GAAC,2EAAkB,EAAAA,EAAa,UAAT,0BAAI,YAI+B,0BAAI,yIAtBpG,MAAAC,GAAA,EAAAC,EA2BM,MA3BN,EA2BM,CA1BJF,EAwBM,MAxBN,EAwBM,CAvBJG,EAsBU,EAAA,CArBL,MAAO,EAAI,IAAA,EAAA,WAEd,IAee,CAffA,EAee,EAAA,CAfD,MAAM,uCAAS,cAAY,oBACvC,IAaY,CAbZA,EAaY,EAAA,CAZR,MAAM,cACN,KAAA,GACC,UAAW,EAAO,uCAClB,cAAa,GACb,YAAW,EAAU,WACrB,MAAO,EACR,IAAI,aACH,aAAY,EAAqB,sBACjC,mBAAkB,eAErB,IAA2F,CAA3FH,EAA2F,IAA3F,EAA2F,CAAhEG,EAA4D,EAAA,CAAnD,MAAM,iBAAiB,EAAA,WAAC,IAAiB,CAAjBA,EAAiB,CAAA,YAC7E,wDAGJA,EAEe,EAAA,KAAA,WADX,IAAsG,CAAtGA,EAAsG,EAAA,CAA3F,KAAK,UAAW,QAAO,EAAY,aAAE,KAAK,QAAQ,MAAA,CAAwB,OAAA,UAAA,cAAC,IAAI"}