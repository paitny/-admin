{"version":3,"file":"ContactMsg.17c0e1f0.js","sources":["../../src/views/ContactMessage/ContactMsg.vue"],"sourcesContent":["<template>\r\n  <div id=\"ContactMsg\">\r\n    <el-table\r\n        :data=\"contactData\"\r\n        border\r\n        style=\"width: 100%\"\r\n\r\n    >\r\n      <el-table-column\r\n          prop=\"date\"\r\n          label=\"日期\"\r\n          :key=\"contactData.date\"\r\n          :formatter=\"dateFormat\"\r\n          align=\"center\"\r\n      >\r\n\r\n      </el-table-column>\r\n      <el-table-column\r\n          prop=\"name\"\r\n          label=\"Name\"\r\n          align=\"center\"\r\n      >\r\n      </el-table-column>\r\n      <el-table-column\r\n          prop=\"email\"\r\n          label=\"Email\"\r\n          align=\"center\"\r\n      >\r\n      </el-table-column>\r\n      <el-table-column\r\n          prop=\"subject\"\r\n          label=\"Subject\"\r\n          align=\"center\"\r\n      >\r\n      </el-table-column>\r\n      <el-table-column\r\n          prop=\"message\"\r\n          label=\"Message\"\r\n          align=\"center\"\r\n      >\r\n      </el-table-column>\r\n      <el-table-column\r\n          label=\"是否处理\"\r\n          align=\"center\"\r\n      >\r\n        <template #default=\"scope\">\r\n          <el-switch\r\n              style=\"display: block\"\r\n              v-model=\"scope.row.read\"\r\n              active-color=\"#13ce66\"\r\n              inactive-color=\"#ff4949\"\r\n              active-text=\"已处理\"\r\n              inactive-text=\"未处理\"\r\n              @change=\"switchHandle(scope.row)\"\r\n          >\r\n          </el-switch>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport moment from 'moment'\r\n\r\nexport default {\r\n  name: \"ContactMsg\",\r\n  data() {\r\n    return {\r\n      contactData: [],\r\n\r\n    }\r\n  },\r\n  methods: {\r\n    //转换日期显示\r\n    //ui中自带的方法\r\n    dateFormat: function (row, column) {\r\n      let date = row[column.property];\r\n      if (date == undefined) {\r\n        return \"\";\r\n      }\r\n      return moment(date).format(\"YYYY-MM-DD HH:mm:ss\");\r\n    }\r\n    ,\r\n\r\n\r\n    //请求所有数据\r\n    async getContactData() {\r\n      let {data} = await this.$axios({\r\n        method: \"GET\",\r\n        url: \"/adminServer/contact\"\r\n      })\r\n\r\n      if (data.code) {\r\n        return this.$message.error(data.msg)\r\n      }\r\n\r\n      this.contactData = data.data\r\n\r\n    },\r\n\r\n    //switch切换触发\r\n    async switchHandle(item) {\r\n      let {data} = await this.$axios({\r\n        method: \"POST\",\r\n        url: \"/adminServer/contact/read\",\r\n        data: {\r\n          id: item._id,\r\n          read: item.read\r\n        }\r\n      })\r\n      if (data.code) {\r\n        return this.$message.error(data.msg)\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.getContactData()\r\n\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"names":["moment","_openBlock","_createElementBlock","_createVNode","_createBlock","_withCtx"],"mappings":"83BAiEA,KAAK,GAAU,CACb,KAAM,aACN,MAAO,CACL,MAAO,CACL,YAAa,CAAE,CAEjB,CACD,EACD,QAAS,CAGP,WAAY,SAAU,EAAK,EAAQ,CACjC,GAAI,GAAO,EAAI,EAAO,UACtB,MAAI,IAAQ,KACH,GAEFA,EAAO,CAAI,EAAE,OAAO,qBAAqB,CAClD,EAKA,KAAM,iBAAiB,CACrB,GAAI,CAAC,QAAQ,KAAM,MAAK,OAAO,CAC7B,OAAQ,MACR,IAAK,uBACN,EAED,GAAI,EAAK,KACP,MAAO,MAAK,SAAS,MAAM,EAAK,GAAG,EAGrC,KAAK,YAAc,EAAK,IAEzB,EAGD,KAAM,cAAa,EAAM,CACvB,GAAI,CAAC,QAAQ,KAAM,MAAK,OAAO,CAC7B,OAAQ,OACR,IAAK,4BACL,KAAM,CACJ,GAAI,EAAK,IACT,KAAM,EAAK,IACb,EACD,EACD,GAAI,EAAK,KACP,MAAO,MAAK,SAAS,MAAM,EAAK,GAAG,CAEvC,CACD,EACD,SAAU,CACR,KAAK,eAAe,CAEtB,CACF,EAvHO,EAAA,CAAA,GAAG,YAAY,wFAApB,MAAAC,GAAA,EAAAC,EA0DM,MA1DN,EA0DM,CAzDJC,EAwDW,EAAA,CAvDN,KAAM,EAAW,YAClB,OAAA,GACA,MAAA,CAAmB,MAAA,MAAA,cAGrB,IAQkB,MARlBC,EAQkB,EAAA,CAPd,KAAK,OACL,MAAM,eACL,IAAK,EAAW,YAAC,KACjB,UAAW,EAAU,WACtB,MAAM,iCAIVD,EAKkB,EAAA,CAJd,KAAK,OACL,MAAM,OACN,MAAM,WAGVA,EAKkB,EAAA,CAJd,KAAK,QACL,MAAM,QACN,MAAM,WAGVA,EAKkB,EAAA,CAJd,KAAK,UACL,MAAM,UACN,MAAM,WAGVA,EAKkB,EAAA,CAJd,KAAK,UACL,MAAM,UACN,MAAM,WAGVA,EAgBkB,EAAA,CAfd,MAAM,2BACN,MAAM,WAEG,QAAOE,EAChB,AASY,GAVW,CACvBF,EASY,EAAA,CARR,MAAA,CAAsB,QAAA,OAAA,aACb,EAAM,IAAI,8BAAV,EAAM,IAAI,KAAI,EACvB,eAAa,UACb,iBAAe,UACf,cAAY,qBACZ,gBAAc,qBACb,SAAQ,GAAA,EAAA,aAAa,EAAM,GAAG"}