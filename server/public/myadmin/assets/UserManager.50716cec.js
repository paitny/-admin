import{h as g}from"./moment.17f8281e.js";import{resolveComponent as i,openBlock as m,createElementBlock as f,createVNode as t,withCtx as n,createBlock as w,createElementVNode as b,createTextVNode as v}from"https://esm.sh/vue@3.0.5";import{_ as x}from"./index.10c0c1b8.js";import"https://cdn.jsdelivr.net/npm/ant-design-vue@2.2.0-beta.6/lib/grid/style/index.css";import"https://esm.sh/axios@0.21.1";import"https://esm.sh/vuex@4.0.2";import"https://esm.sh/dayjs@1.10.5";import"https://esm.sh/dayjs@1.10.5/plugin/localeData.js";import"https://esm.sh/dayjs@1.10.5/plugin/customParseFormat.js";import"https://esm.sh/dayjs@1.10.5/plugin/advancedFormat.js";import"https://esm.sh/dayjs@1.10.5/plugin/weekOfYear.js";import"https://esm.sh/dayjs@1.10.5/plugin/weekYear.js";import"https://esm.sh/dayjs@1.10.5/plugin/dayOfYear.js";import"https://esm.sh/dayjs@1.10.5/plugin/isSameOrAfter.js";import"https://esm.sh/dayjs@1.10.5/plugin/isSameOrBefore.js";const $={name:"ContactMsg",data(){return{userData:[]}},methods:{dateFormat:function(e,a){let l=e[a.property];return l==null?"":g(l).format("YYYY-MM-DD HH:mm:ss")},async getUserData(){let{data:e}=await this.$axios({method:"GET",url:"/get/user"});if(console.log(e.data),e.code)return this.$message.error(e.msg);this.userData=e.data},async deleteUser(e){let{data:a}=await this.$axios({method:"DELETE",url:"/adminServer/consumer/delete",data:{id:e}});if(a.code)return this.$message.error(a.msg);this.$message.success("\u7528\u6237\u5DF2\u6CE8\u9500"),await this.getContactData()},async switchHandle(e){let{data:a}=await this.$axios({method:"POST",url:"/adminServer/consumer/admin",data:{id:e._id,admin:e.admin}});if(console.log(e.admin),a.code)return this.$message.error(a.msg);await this.getUserData()}},created(){this.getUserData()}},D={id:"ContactMsg"},y={class:"demo-image__preview"},U=v("\u6CE8\u9500\u7528\u6237 ");function C(e,a,l,k,c,s){const o=i("el-table-column"),p=i("el-image"),u=i("el-switch"),_=i("el-button"),h=i("el-table");return m(),f("div",D,[t(h,{data:c.userData,border:"",style:{width:"100%"}},{default:n(()=>[(m(),w(o,{prop:"date",label:"\u6CE8\u518C\u65E5\u671F",key:c.userData.date,formatter:s.dateFormat,width:"200px",align:"center"},null,8,["formatter"])),t(o,{prop:"_id",label:"id",align:"center"}),t(o,{prop:"user",label:"Name",align:"center"}),t(o,{prop:"secret",label:"secret",align:"center"}),t(o,{prop:"photo",label:"\u5934\u50CF",align:"center"},{default:n(r=>[b("div",y,[t(p,{style:{width:"150px",height:"100px"},src:`${e.baseURL}${r.row.photo}`,"preview-src-list":[`${e.baseURL}${r.row.photo}`],"initial-index":4,fit:"cover","preview-teleported":"true"},null,8,["src","preview-src-list"])])]),_:1}),t(o,{label:"\u7BA1\u7406\u5458\u8D26\u53F7\u6388\u6743",align:"center"},{default:n(r=>[t(u,{style:{display:"block"},modelValue:r.row.admin,"onUpdate:modelValue":d=>r.row.admin=d,"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"\u7BA1\u7406\u5458","inactive-text":"\u4E0D\u662F\u7BA1\u7406\u5458",onChange:d=>s.switchHandle(r.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),t(o,{fixed:"right",label:"\u8C28\u614E\u64CD\u4F5C",align:"center"},{default:n(r=>[t(_,{type:"danger",onClick:d=>s.deleteUser(r.row._id),size:"large"},{default:n(()=>[U]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])])}var P=x($,[["render",C]]);export{P as default};
//# sourceMappingURL=UserManager.50716cec.js.map
